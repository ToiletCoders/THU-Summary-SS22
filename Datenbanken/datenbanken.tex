\documentclass{scrreprt}

\usepackage{graphicx}
\usepackage{tikz}
\usepackage{amstext}
\usepackage{hyperref}
\usepackage{amsfonts}
\usepackage{tabularx}
\usepackage{multirow}
\usepackage{amssymb}
\usepackage{textcomp}
\newcommand\tab[1][1cm]{\hspace*{#1}}

\hypersetup{
  colorlinks=false,
  linkbordercolor=blue,
  pdfborderstyle={/S/U/W 0}
}
\title{\textbf{Datenbanken}}
\author{\href{https://github.com/toiletcoders}{\color{black}github/toiletcoders}}
\date{}
\begin{document}
\pagenumbering{gobble}  
\maketitle
\pagebreak
\renewcommand{\contentsname}{Inhaltsverzeichnis}
\setcounter{tocdepth}{1}
\tableofcontents
\addtocontents{toc}{~\hfill\textbf{Seite}\par}
\pagebreak
\pagenumbering{arabic}
\chapter{Einführung}
\section{Grundlagen}
\subsection{ANSI-SPARC}
\begin{itemize}
  \item Ebene 1: Externe Ebene
  \\Nutzer benötigen nur Teilausschnitt der Daten
  \\Spezifikation der notwendigen Datensicht
  \item Ebene 2: Konzeptionelle Ebene 
  \\Vereinheitlichung der Sichten der Externen Ebene 
  \\Vollständige Beschreibung der für alle Anwendungen relevanten Objekte und deren Beziehungen
  \item Ebene 3: Interne Ebene
  \\physikalische Darstellung der Datenbank im Computer
  \\Speicherstrukturen zur Ablage der Daten
\end{itemize}
\includegraphics[width=0.6\textwidth]{"graphics/ANSI-SPARC"}
\\Eigenschaften:
\begin{itemize}
  \item Gleiche Daten für alle Nutzer
  \item Änderungen in Nutzersichten sind lokal für die Anwendung
  \item Datenspeicherung (wie und wo) für Nutzer unwichtig
  \item Anwendungsstruktur für Datenbankaufbau unerheblich
  \item Änderung im Datenbankaufbau ohne Wirkung auf Nutzersicht
\end{itemize}
Beispiel:
%\\\includegraphics[width=0.7\textwidth]{"graphics/ANSI-BSP"}
\\Logische Datenunabhängigkeit:
\begin{itemize}
  \item Anwendungen werden nicht beeinträchtigt, wenn Änderungen am Schema vorgenommen werden
  \item Bei logischer Datenunabhängigkeit:
  \\Keine Änderung an Spezifikationen durch Hinzufügen, Ändern, Löschen von Objekten
  \item Nur teilweise gegeben in praktischen Datenbanksystemen
\end{itemize}
Physische Datenunabhängigkeit:
\tab Aus physischer Datenunabhängigkeit folgt:
\\\tab Keine Änderung am konzeptionellen/externen Schema durch Umstellung der
Dateistruktur, Speicherstruktur, Speichermedien, Anzahl der DB Server
\\\tab Weitestgehnd gegeben in prakticshen Datenbanksystemen
\subsection{CASE Werkzeuge}
CASE = Computer Aided Software Engineering
\\Entwicklung von Software nach ingenieur-wissenschaftl. Methoden unter Verwendung eines Computers
\\\textbf{Ziel:} Erstellung von Software möglichst automatisch aus dem Fachkonzept
CASE:
\begin{itemize}
  \item Oftmals graphische Notation des Fachkonzepts
  \item CASE-Werkzeuge (Tools)
  \begin{itemize}
    \item Planung
    \item Entwurf
    \item Dokumentation
  \end{itemize}
  \item können in die IDE integriert Sichten
\end{itemize}
\subsection{Datenbank- vs. dateibasierte Anwendungssysteme}
\textbf{Architektur Datei-basierter Anwendungen:}
\\Zahlreiche Nachteile
\tab \begin{itemize}
  \item Redundanz
  \item Gemeinsamer Zugriff mittels Konvertern
  \item Datenstrukturänderung bedingt Umprogrammieren
  \item Keine parallelen Zugriffe möglich
  \item Keine Sicherungsmechanismen
\end{itemize}
\textbf{Architektur Datenbank-basierter Anwendungen}
\\\includegraphics[width=0.55\textwidth]{"graphics/Datenbank-Arch"}
\subsubsection{DBMS vs. DB}
\textbf{Datenbank}
\begin{itemize}
  \item Sammlung strukturierter Daten
  \item sachlogische Zusammenhänge untereinander
\end{itemize}
\textbf{Datenbankmanagementsystem}
\begin{itemize}
  \item Programmsystem
  \item Systemsoftware für alle Aspekte der Datenverwaltung
  \item Beinhaltet of eine oder mehrere DBen
\end{itemize}
\textbf{Architektur DBMS}
\\Zahlreiche Vorteile:
\begin{itemize}
  \item Redundanzfrei
  \item Logische Datenunabhängigkeit
  \item Physische Datenunabhängigkeit
  \item Mehrnutzerbetrieb mit Rechteverwaltung
  \item Normierte Schnittstelle mit Effizienter Verwaltung
\end{itemize}
\subsection{Phasenmodell für Datenbankentwurf}
\begin{itemize}
  \item [1.] Anforderungsanalyse:
  \\Anforderungen der potentiellen Benutzer werden erfasst
  \begin{itemize}
    \item Informelle Beschreibung
    \item Unterscheidung in Informations- und Bearbeitungsanforderungen
    \item Funktionenmodell: \textbf{C}reate, \textbf{R}ead, \textbf{U}pdate, \textbf{D}elete (CRUD)
  \end{itemize}
  \item [2.] Konzeptioneller Entwurk
  \begin{itemize}
    \item Erste formale Darstellung erstellen: konzeptionelles und externe Schemata
    \item Datenmodelle sind abstrakte Darstellungen der Wirklichkeit
    \item Ansätze zur Erstellung eines konzeptionellen Entwurfs:
    \begin{itemize}
      \item \textbf{Top-Down-Ansatz}
      \\Modellierung des konzeptionellen Schemas und Ableitung der externen Schemata
      \item \textbf{Bottom-Up-Ansatz}
      \\Modellierung der externen Schemata und anschließende Integration der externen Schemata zu einem konzeptionellen Schema.
      \\Hierbei müssen i.d.R. Widersprüche und Konflikte zwischen einzelnen externen Schichten aufgelöst werden.
    \end{itemize}
  \end{itemize}
  \item [3.] Logischer Entwurf
  \\Das logische Schema beschreibt die Datenstrukturen des konzeptionellen Modells
  \begin{itemize}
    \item Entscheidung für verwendetes DBMS oder mind. für ein Datenbankmodell
    \item Transformation des konzept. Modells in Abhängigkeit der Anforderungen des Datanbankmodells
    \item Optimierung des Modells durch Vermeidung von Redundanzen im Rahmen der Normalisierung
  \end{itemize}
  \item [4.] Datendefinition
  \begin{itemize}
    \item Logisches Modell wird mit \textbf{Data Definition Language (DLL)} definiert
    \item Externe Schemata werden mit \textbf{View Definition Language (VDL)} definiert
  \end{itemize}
    Umsetzung des log. Schemas und der externen Schemata mit Hilfe der Datenbanksprache.
  \\Diese Datenbanksprache ist i.d.R. SQL
  \\\textbf{S}tructured \textbf{Q}uery \textbf{L}anguage
  \\SQL ist standardisiert, allerdings gibt es Dialekte je nach DBMS

\end{itemize}
\chapter{Konzeptionelles Modell}
\section{Entitäten und Entitätstypen}
\subsection{Entity-Relationship Modell}
Vereinfachte graphische Darstellung von Entitäten (Objekten), Beziehungen zw. den Objekten: Notwendigkeit, Anzahld er beteiligten Entitäten
\\\textbf{Ziele:}
\begin{itemize}
  \item Bessere Kommunikation zwischen den Beteiligten
  \\\tab Experten (Fachabteilung), ANwendungsentwickler, \dots
  \\\tab Beurteilung der Qualität des Modells
  \\\tab Grundlage zur Erstellung der Datenbank
\end{itemize}
\subsection{Entitäten und Entitätstypen}
\textbf{Entität (Objekt)}
\begin{itemize}
  \item Ein Exemplar von
  \begin{itemize}
    \item Konkreten (Studierender; Gebäude)
    \item Abstrakten/ nicht-materiellen (Zugehörigkeit; Betreuungsverhältnis)
  \end{itemize}
  \item Dient der Informationsspeicherung
\end{itemize}
\textbf{Entitätstyp}
\begin{itemize}
  \item Eindeutig benannt
  \item "Gruppe" von Entitäten (Objekten)
  \item Speicherung gleichartiger Informationen
  \item Gleichartige Verarbeitungsverzögerung
  \item "Klasse" in der OOP
  \item Sachlogische Zusammenhänge von Entitäten 
\end{itemize}
\subsection{Attribut}
\textbf{Attribut}
\begin{itemize}
  \item Eigenschaft
  \item Benennung eines Merkmals
  \item Ein relevantes Merkmal von Entitäten eines Entitätstyp
\end{itemize}
\textbf{Attributwert}
\begin{itemize}
  \item Eigenschaftswert
  \item Spezielle Ausprägung eines Attributs für ein Objekt
\end{itemize}
\includegraphics[width=0.7\textwidth]{"graphics/BSP-entity"}
\subsection{Identifizierungsmöglichkeiten}
\textbf{Möglichkeiten zur Identifizierung einer Entität}
\\\tab Ein einziges Attribut - Bezeichnung eines Fachs
\\\tab Kombination von Attributen - Name und Kreis eines Ortes
\\\tab Organisatorisches Attribut - Personalnummer
\subsection{Hauptattribut}
\textbf{Ein Hauptattribut hat eine} identifizierende Eigenschaft oder eine teil-identifizierende Eigenschaft
\\\textbf{Es leistet einen Beitrag} zur Identifizierung einer Entität und innerhalb eines Entitätstyps
\subsection{Nebenattribut}
\textbf{Ein Nebenattribut} hat eine beschreibende Eigenschaft und ist nicht notwendig zur Identifizierung
\\\textbf{Es leistet keinen Beitrag} zur Identifizierung einer Entität und innerhalb eines Entitätstyps
\section{Beziehungen}
Eine Beziehung ist ein konkreter Zusammenhang zwischen realen Entitäten.
\\An einer Beziehung können auch mehr als zwei Entitäten beteiligt sein. (Duale/ binäre Beziehung)
\\Ein \textbf{Beziehungstypen} ist eine sachlogischer Zusammenhang zwischen Entitäten verschiedener Entitätstypen
\\Der \textbf{Der Grad eines Beziehungstypen} ist die Anzahl der an einem Beziehungstypen beteiligten Entitätstypen
\\\includegraphics[width=0.7\textwidth]{"graphics/bsp-bz"}
\subsection{Multiplizität}
Mulitplizität $<\textcolor{blue}{A},\textcolor{red}{B}>$ besteht aus zwei Aspekten
\\\tab Optionalität: Zeichen \textcolor{blue}{vor} dem Komma
\\\tab Kardinalität: Zeichen \textcolor{red}{hinter} dem Komm
\\\textcolor{blue}{\textbf{Optionalität}}
\\\tab Muss jedes A mit einem B in Beziehung stehen?
\\\tab Ja $=>$ \textcolor{blue}{1},? \tab Nein $=>$ \textcolor{blue}{0},?
\\\textcolor{red}{\textbf{Kardinalität}}
\\\tab Kann ein A mit mehreren Bs in Beziehung stehen?
\\\tab Ja $=>$ ?,\textcolor{red}{N} \tab Nein $=>$ ?,\textcolor{red}{1}
\subsection{Beziehungstyp Regeln}
\begin{itemize}
  \item Ein Beziehungstyp wird durch eine Linie dargestellt
  \item Die Benennung der Richtung von A nach B steht in der Nähe von A
  \item Optionalität wird durch einen Kreis gekennzeichnet
  \item Eine verpflichtende Verbindung wird durch einen Strich gekennzeichnet
  \item Kardinalität 1 wird durch einen Strich dargestellt, N durch "Krähenfüße"
  \item Bei $>1$ können auch Minimum und Maximum angegeben werden [min,max]
\end{itemize}
\subsection{Klassen von Beziehungstypen}
\includegraphics[width=0.9\textwidth]{"graphics/kardin"}
\section{Beziehungen (weitere Konzepte)}
%Redundanz
%Parallele Beziehungstypen
%Identifizierende Beziehung
%Schlüssel
%Rekursiv-Beziehungstypen
%Eigenschaften von Beziehungstypen
\subsection{Redundanz}
Gründe für die Vermeidung von Redundanz:
\\\tab Mehraufwand in der Datenpflege
\\\tab Widersprüchlichkeit in den Daten möglich 
\\\tab Speicherplatzverschwendung
\subsection{Parallele Beziehungstypen}
\includegraphics[width=0.7\textwidth]{"graphics/parallel-bz"}
\\ Ein \textbf{Schwacher Entitätstyp} ist:
\\\tab Eigenschaften nicht ausreichend für eindeutige Identifizierung
\\\tab Eine oder mehrere Beziehungstyp-Richtungen zur Identifizierung nötig
\\\textbf{Identifizierung} mittels Attrbute, Beziehungstyp-Richtungen und deren Kombination
\subsection{Schlüssel}
Ein Schlüssel ist ein Attribut oder eine Beziehungstyprichtung zur eindeutigen Identifizierung
\\\textbf{Primärschlüssel}
Ein eindeutiger Schlüssel (Personalnummer)
\\\textbf{Zusammengesetzte Schlüssel}
mehrere teil-identifizierende Elemente (Attribute und Beziehungstyprichtung)
\\\textbf{Teilschlüssel}
echte Teilmenge der teil-identifizierenden Elemente
\subsection{Rekursiv-Beziehungstypen}
Entitäten gehören dem selben Entitätstypen an
\\\includegraphics[width=0.7\textwidth]{"graphics/rekursivBZ"}
\subsection{Eigenschaften von Beziehungstypen}
Generelle Regel:
\\Eigenschaften des Beziehungstyps werden mithilfe eines zusätzlichen Entitätstyps modelliert
\pagebreak
\chapter{Datenbankmodelle}
\section{Datenbankmodell}
\textbf{Datenbankmodell}
\\logisches Beziehungsgebilde, beschreibt die Art und Weise der Verbindung von Datensätzen
\\\textbf{Traditionelle Datenbankmodelle}
\begin{itemize}
  \item Hierarchisch: nur einen Elternknoten
  \item Netzwerk
  \item Relational (RDBM)
  \item Objektorientiert und objektrational
\end{itemize}
"Neue" Datenbankmodelle (seit 2005):
\\Spaltenbasiert, Dokumentorientiert
\section{Relationales Datenmodell}
\textbf{Theorie:}
\begin{itemize}
  \item streng mathematisch
  \item Entitätstypen werden als Relationen gespeichert
  \item Beziehungen zwischen Entitäten werden über Referenzattribute in Tabellenspalten gespeichert
  \item \textbf{Relation:} Teilmenge der Produktmenge der Wertebereiche der Attribute
\end{itemize}
%3.9

%\subsection{Grundlagen}
\subsection{Schlüssel im RDMBS}
Ein Schlüssel ist jede identifizierende Attributmenge, die minimal ist.
\\Primärschlüssel ist ein Schlüssel zur Identifizierung einzelner Tupel
\\Fremdschlüssel ist eine Attributmenge die einen anderen Primärschlüssel referenziert
\\\includegraphics[width=0.7\textwidth]{"graphics/Fremdschlussl"}
\section{NoSQL (andere Datenmodelle)}
\textbf{NoSQGL Eigenschaften}
\begin{itemize}
  \item Datenmodell ist nicht-Relational
  \item keine Relationen
  \item Sammelbegriff für nicht-relationale Datenmodelle
  \item NoSQL Modell ist oft frei von einem mathematischen Schema
\end{itemize}
\section{Datentypen}
Jedem Attribut wird ein Datentyp zugewiesen
\subsection{Nummerische Datentypen}
Ablage von numerischen Werten (Vorzeichenbehaftet - Signed, sonst Unsigned)
\subsection{Ganzzahlige Datentypen}
\textbf{BOOLEAN} (1 Byte) true/false
\\\textbf{TINYINT} (1 Byte) sehr kleine Werte (-128 bis 127) (Unsigned 0 bis 255)
\\\textbf{SMALLINT} (2 Byte)
\\\textbf{MEDIUMINT} (3 Byte)
\\\textbf{INT} (4 Byte)
\\\textbf{BIGINT} (8 Byte)
\subsection{Kommazahlen}
\textbf{Festkommazahl} hat immer den gleichen Exponenten (Preise, Ausmaße)
\\\textbf{Fließkommazahl} hat wechselnde Exponenten
\subsection{Fließkommazahlen}
\textbf{FLOAT} (4 Byte) einfache Genauigkeit
\\\textbf{DOUBLE} (8 Byte) doppelte Genauigkeit
\subsection{Festpunktzahlen}
\textbf{DECIMAL} Angabe von exakten Zahlen, Festlegung der Länge und Nachkommastellen
\subsection{Datums-Datentyp}
Speichern Datums- und Zeitwerte, (DATETIME, DATE, TIMESTAMP, YEAR, TIME)
\subsection{String Datentypen}
\textbf{CHAR(N)} Ablage von Zeichenketten der festen Länge N
\\\textbf{VARCHAR(N)} Ablage von Zeichenketten mit variabler Länge bis zu N
\\CHAR benötigt 1 Byte pro Zeichen 
\\VARCHAR benötigt 1 Byte zusätzlich pro Spalte
%next Kapitel 4
%Grafik einbetten:
%\includegraphics[width=0.7\textwidth]{"graphics/name-der-grafik"}
\end{document}